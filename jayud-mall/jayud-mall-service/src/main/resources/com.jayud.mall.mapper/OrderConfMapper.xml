<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jayud.mall.mapper.OrderConfMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.jayud.mall.model.po.OrderConf">
        <id column="id" property="id" />
        <result column="order_no" property="orderNo" />
        <result column="tid" property="tid" />
        <result column="harbour_code" property="harbourCode" />
        <result column="status" property="status" />
        <result column="user_id" property="userId" />
        <result column="user_name" property="userName" />
        <result column="create_time" property="createTime" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, order_no, tid, harbour_code, status, user_id, user_name, create_time
    </sql>

    <!--查询报价模板并分页-->
    <select id="findOrderConfByPage" parameterType="com.jayud.mall.model.bo.QueryOrderConfForm"
            resultType="com.jayud.mall.model.vo.OrderConfVO" >
        select
        t.id,t.order_no,t.tid,t.harbour_code,t.`status`,t.user_id,t.user_name,t.create_time,
        t1.code_name tName,
        t2.code_name harbourName
        from order_conf t
        LEFT JOIN transport_way t1 on t1.id = t.tid
        LEFT JOIN harbour_info t2 on t2.id_code = t.harbour_code
        WHERE
        1 = 1
        <if test="form.orderNo != null and form.orderNo != ''">
            AND t.`order_no` LIKE concat('%',#{form.orderNo},'%')
        </if>
        <if test="form.harbourCode != null and form.harbourCode != ''">
            AND t.`harbour_code` = #{form.harbourCode}
        </if>
    </select>


</mapper>
