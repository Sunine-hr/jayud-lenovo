<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jayud.mall.mapper.TemplateFileMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.jayud.mall.model.po.TemplateFile">
        <id column="id" property="id" />
        <result column="qie" property="qie" />
        <result column="file_name" property="fileName" />
        <result column="options" property="options" />
        <result column="remarks" property="remarks" />
        <result column="qf_id" property="qfId" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, qie, file_name, options, remarks
    </sql>

    <!--根据`报价模板id`，查询`文件信息`-->
    <select id="findTemplateFileByQie" parameterType="java.lang.Long"
            resultType="com.jayud.mall.model.vo.TemplateFileVO">
        select
        t.id,t.qie,t.file_name,t.`options`,t.remarks,t.qf_id,
        t1.group_code,t1.group_name,t1.types
        from template_file t
        LEFT JOIN quoted_file t1 on t1.id = t.qf_id
        where qie = #{qie}
        ORDER BY t1.types ASC,t1.group_code ASC,t.qf_id ASC
    </select>

</mapper>
